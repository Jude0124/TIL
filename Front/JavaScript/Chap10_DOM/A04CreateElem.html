<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <title>A04 Shopping</title>
    <script type="text/javascript">
        (function(){
            function loadEvent(){
                // let btns = document.getElementsByTagName('button');
                // let btns = document.querySelectorAll('button');
                let btns = document.querySelector('button');
                let btnTwo = btns.nextElementSibling;
                let btnThree = btnTwo.nextElementSibling;
                let btnFour = btnThree.nextElementSibling
                // console.log(btns);

                btns.addEventListener('click', function(evt){
                    const movies = document.querySelector('#movies');
                    const firstElem = movies.firstElementChild;
                    if( firstElem && firstElem.nextElementSibling) {
                        let two = firstElem.nextElementSibling;
                        console.log(two, two.innerText);
                    }
                });
                btnTwo.addEventListener('click', function(evt){
                    const liElem = document.createElement('li');
                    // 속성이 필요하다면
                    liElem.setAttribute('title', '동적 속성 추가');

                    const linkElem = document.createElement('a');
                    linkElem.setAttribute('href', 'http://www.daum.net');
                    liElem.appendChild(linkElem);       // <li><a href="..."></a></li>
                    const liText = document.createTextNode('우유');
                    liElem.appendChild(liText);      // <li><a href="...">우유</a></li>


                    const purchases = document.querySelector('#purchases');
                    // purchases.appendChild(liElem);

                    // console.log(purchases.cildren);
                    purchases.insertBefore(liElem, purchases.children[1])

                });

                btnThree.addEventListener('click', function(evt){
                    const purchases = document.querySelector('#purchases');
                    const firstElem = purchases.firstElementChild;
                    if(firstElem) {
                        // firstElem.remove();
                        purchases.removeChild(firstElem);
                    }
                });
                btnFour.addEventListener('click', function(evt){
                    const divElem = makeDOM('div',{title: 'DIV'}, '생성한 DIV 요소');
                    document.body.appendChild(divElem);
                    
                    const inputElem = makeDOM('input', {type: 'text', class : 'form-control'});
                    document.body.appendChild(inputElem);
                })
            }

            // makeDom('div', {title : 'ABC', name : 'name'} )
            function makeDOM(tagName, attrs, text){
                // const elem = document.createElement('div');
                const elem = document.createElement(tagName);
                if(attrs){      //값이 있으면 true, 없으면 false
                    for(let item in attrs){
                        elem.setAttribute(item,attrs[item]);
                    }
                }
                if(text){
                    let textNode = document.createTextNode(text);
                    elem.appendChild(textNode)
                }

                return elem
            }

            addEventListener('load', loadEvent)

        })();
    </script>
</head>
<body>
    <div class="card-body">
        <h2>Create Element (DOM 표준 API 이용)</h2>

        <div>
            <button>두번째 영화 찾기</button>
            <button>마지막에 우유 추가</button>
            <button>첫번째 삭제</button>
            <button>함수 이용</button>
        </div>
        <br>
        
        <p title="mart">마트에서 사야할 목록</p>
        <ul id="purchases" class="list">
            <li>두부</li>
            <li>계란</li>
            <li>라면</li>
        </ul>
        
        <p>보고싶은 영화 목록</p>
        <ul id="movies" class="list">
            <li>어벤져스</li>
            <li>다크나이트</li>
            <li>미션임파서블</li>
        </ul>

        <div id="add"></div>
    </div>
</body>
</html>

